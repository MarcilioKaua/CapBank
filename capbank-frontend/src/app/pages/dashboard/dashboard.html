<div class="dashboard">
  <div class="dashboard__balance">
    <mat-card class="balance-card">
      <div class="balance-card__header">
        <div class="balance-card__info">
          <span class="balance-card__label">Conta Corrente</span>
          <span class="balance-card__account"
            >Ag: {{ agencyNumber() }} • Conta: {{ accountNumber() }}</span
          >
        </div>
        <button mat-icon-button class="balance-card__toggle" (click)="toggleBalanceVisibility()">
          <mat-icon>{{ balanceVisible() ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
      </div>

      <div class="balance-card__amount">
        <span class="balance-card__currency">R$</span>
        <span class="balance-card__value" [class.balance-card__value--hidden]="!balanceVisible()">
          {{ balanceVisible() ? formattedBalance() : '••••••' }}
        </span>
      </div>

      <div class="balance-card__actions">
        <button mat-raised-button color="warn" class="balance-card__btn">
          <mat-icon>send</mat-icon>
          Transferir
        </button>
        <button mat-flat-button class="balance-card__btn">
          <mat-icon>receipt_long</mat-icon>
          Extrato
        </button>
      </div>
    </mat-card>
  </div>

  <div class="dashboard__content">
    <div class="dashboard__transactions">
      <div class="transactions-header">
        <h2 class="transactions-title">Últimas Transações</h2>
        <button mat-button color="primary">Ver todas</button>
      </div>

      <div class="transactions-list">
        @for (transaction of recentTransactions(); track transaction.id) {
        <div class="transaction-item">
          <div class="transaction-item__icon" [style.background-color]="transaction.iconColor">
            <mat-icon>{{ transaction.icon }}</mat-icon>
          </div>
          <div class="transaction-item__details">
            <span class="transaction-item__description">{{ transaction.description }}</span>
            <span class="transaction-item__date">{{
              formatDateTime(transaction.transaction_date)
            }}</span>
          </div>
          <div
            class="transaction-item__amount"
            [class]="getAmountClass(transaction.transaction_type)"
          >
            {{ formatAmount(transaction.amount, transaction.transaction_date) }}
          </div>
        </div>
        }
      </div>
    </div>

    <div class="dashboard__actions">
      <div class="quick-actions">
        <div *ngFor="let action of quickActions" class="quick-action" [routerLink]="action.route">
          <div class="quick-action__icon" [style.background-color]="action.color">
            <mat-icon>{{ action.icon }}</mat-icon>
          </div>
          <div class="quick-action__text">
            <span class="quick-action__title">{{ action.title }}</span>
            <span class="quick-action__subtitle">{{ action.subtitle }}</span>
          </div>
          <mat-icon class="quick-action__arrow">chevron_right</mat-icon>
        </div>
      </div>
    </div>
  </div>
</div>
